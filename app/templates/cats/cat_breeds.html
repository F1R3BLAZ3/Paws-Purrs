{% extends 'base.html' %} {% block title %}Cat Breeds{% endblock %} {% block
styles %}
<!-- Your styles here (if any) -->
{% endblock %} {% block content %}
<!-- Input field for searching cat breeds -->
<input
  type="text"
  style="background-color: #2e5eaa"
  id="searchBar"
  onkeyup="searchFunction()"
  placeholder="Search for cat breeds..."
/>

<!-- Container for displaying the list of cat breeds -->
<div class="grid-container" id="breedList">
  {% for breed in breeds_data %}
  <!-- Link to the individual cat breed page -->
  <a
    href="{{ url_for('get_cat_breed_info', breed_id=breed.id) }}"
    class="breed-link"
  >
    <!-- Grid item representing a cat breed -->
    <div class="grid-item" style="background-color: #4e463c">
      <!-- Displaying the breed name and origin -->
      <p class="breed-name">{{ breed.name }}</p>
      <p>{{ breed.origin }}</p>
    </div>
  </a>
  {% endfor %}
</div>

<!-- JavaScript for live search functionality -->
<script>
  function searchFunction() {
    // Get the input field and its value
    var input = document.getElementById("searchBar");
    var filter = input.value;

    // Make an AJAX call to your search route
    fetch("/cat/breeds/search?q=" + filter)
      .then(function (response) {
        return response.json();
      })
      .then(function (data) {
        // Clear the breed list container
        var container = document.getElementById("breedList");
        container.innerHTML = "";

        // Loop through the search results and add them to the breed list container
        for (var i = 0; i < data.length; i++) {
          var breed = data[i];

          // Create elements for displaying the breed information
          var breedLink = document.createElement("a");
          breedLink.href = "/cat/breeds/" + breed.id;
          breedLink.className = "breed-link";

          var gridItem = document.createElement("div");
          gridItem.className = "grid-item";

          var breedName = document.createElement("p");
          breedName.className = "breed-name";
          breedName.textContent = breed.name;

          var breedOrigin = document.createElement("p");
          breedOrigin.textContent = breed.origin;

          // Append elements to the container
          gridItem.appendChild(breedName);
          gridItem.appendChild(breedOrigin);
          breedLink.appendChild(gridItem);
          container.appendChild(breedLink);
        }
      })
      .catch(function (error) {
        console.error("Error:", error);
      });
  }
</script>
{% endblock %}
